---
- name: Hello Ansible
  hosts: all
  become: true # call this playbook -k -K flags (ssh pass and sudo pass)
  tasks:
    - name: My Test
      command: mkdir -p /home/m/Documents/ansible_test

    - name: Run apt update
      ansible.builtin.apt:
        update_cache: yes

    - name: Run apt upgrade
      ansible.builtin.apt:
        update_cache: yes
        upgrade: yes

    - name: Install ubuntu-restricted-extras
      ansible.builtin.apt:
        name: ubuntu-restricted-extras
        state: present
        update_cache: yes

    - name: Install Totem
      ansible.builtin.apt:
        name: totem  # Package name for Totem
        state: present  # Ensure the package is installed
        update_cache: yes  # Update the apt cache before installing

    - name: Install VLC
      ansible.builtin.apt:
        name: vlc
        state: present
        update_cache: yes  # Update the apt cache before installing

    - name: Add VeraCrypt PPA
      ansible.builtin.apt_repository:
        repo: 'ppa:unit193/encryption'
        state: present

    - name: Update apt cache
      ansible.builtin.apt:
        update_cache: yes

    - name: Install VeraCrypt
      ansible.builtin.apt:
        name: veracrypt
        state: present

    - name: Install make
      ansible.builtin.apt:
        name: make
        state: present

    - name: Install git
      ansible.builtin.apt:
        name: git
        state: present

    - name: Install curl package
      ansible.builtin.apt:
        name: curl
        state: present

    - name: Install tmux package
      ansible.builtin.apt:
        name: tmux
        state: present

    - name: Install recommended NVIDIA driver
      ansible.builtin.apt:
        name: "{{ item }}"
        state: present
      loop:
        - "nvidia-driver-{{ nvidia_driver_version | default('575') }}"
        #- "nvidia-driver-{{ nvidia_driver_version | default('575') }}"
      #notify: Reboot system

  #handlers:
    #- name: Reboot system
      #ansible.builtin.reboot:
        #reboot_timeout: 600
